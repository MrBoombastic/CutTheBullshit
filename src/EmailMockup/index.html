<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Email Mockup</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --bg-color: #f6f8fc;
            --container-bg: #ffffff;
            --text-color: #202124;
            --header-bg: #f1f3f4;
            --border-color: #dadce0;
            --accent-color: #1a73e8;
            --hover-color: #f1f3f4;
        }

        body.dark-mode {
            --bg-color: #202124;
            --container-bg: #2d2e30;
            --text-color: #e8eaed;
            --header-bg: #3c4043;
            --border-color: #5f6368;
            --accent-color: #8ab4f8;
            --hover-color: #3c4043;
        }

        body {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.5;
        }

        .container {
            max-width: none; /* Allow for wider content */
            margin: 0 auto;
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }

        .settings-form {
            flex: 0 0 300px; /* Fixed width for settings form */
            background: var(--container-bg);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
        }

        .preview-container {
            flex: 0 1 auto; /* Allow it to grow but not shrink */
            background: var(--container-bg);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 1px 2px 0 rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
            transition: width 0.3s ease;
        }

        .toolbar {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .toolbar button {
            background: none;
            border: none;
            color: var(--text-color);
            padding: 8px 16px;
            margin-right: 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }

        .toolbar button:hover {
            background-color: var(--hover-color);
        }

        .compose-button {
            background-color: var(--accent-color) !important;
            color: white !important;
            padding: 10px 24px !important;
            border-radius: 24px !important;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .compose-button:hover {
            background-color: #174ea6 !important;
        }

        input, textarea {
            width: calc(100% - 20px);
            padding: 8px;
            margin: 10px 0;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--container-bg);
            color: var(--text-color);
            font-size: 14px;
        }

        .email-header {
            background-color: var(--header-bg);
            padding: 1px 16px 12px 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .email-header h3 {
            margin-bottom: 0;
        }

        .email-body {
            padding: 0 16px 16px 16px;
            font-size: 14px;
        }

        .metadata {
            font-size: small;
            color: var(--text-color);
            opacity: 0.7;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }

        .metadata p {
            margin: 2px 0;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
            color: #202124
        }

        .sender-info {
            flex-grow: 1;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        button.theme-toggle {
            background-color: #6c757d;
            color: white;
        }

        button.theme-toggle:hover {
            background-color: #5a6268;
        }

        button.copy-image {
            background-color: var(--accent-color);
            color: white;
        }

        button.copy-image:hover {
            background-color: #174ea6;
        }

        #preview-message {
            padding-bottom: 0;
        }

        #previewWidth {
            width: 100%;
            margin: 10px 0;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="settings-form">
        <h2>Email Mockup</h2>
        <input id="sender" placeholder="From: (optional)" type="text">
        <input id="recipient" placeholder="To: (optional)" type="text">
        <input id="subject" placeholder="Subject" type="text">
        <textarea id="message" placeholder="Compose email" rows="10"></textarea>
        <button class="theme-toggle" onclick="toggleTheme()">Toggle Theme</button>
        <button class="copy-image" onclick="convertToImage()" style="margin-top: 5px">Copy Image to Clipboard</button>
        <div style="padding-top: 20px">
            <label for="previewWidth">Preview Width:</label>
            <input id="previewWidth" max="2000" min="300" step="50" type="range" value="600">
            <span id="widthValue">600px</span>
        </div>
    </div>
    <div class="preview-container">
        <div class="preview-content">
            <div class="email-header">
                <h3 id="preview-subject">Subject</h3>
            </div>
            <div class="email-body">
                <div class="metadata">
                    <div class="avatar">A</div>
                    <div class="sender-info">
                        <p id="from-container"><strong id="preview-sender">Sender</strong></p>
                        <p id="to-container">to <span id="preview-recipient">me</span></p>
                    </div>
                </div>
                <p id="preview-message"></p>
            </div>
        </div>
    </div>
</div>

<footer style="margin-top: 20px; text-align: center; color: #555;">
    <a href="/">Cut The Bullshit</a>
</footer>


<script>
    function updatePreview() {
        const sender = document.getElementById('sender').value;
        const recipient = document.getElementById('recipient').value;
        const subject = document.getElementById('subject').value;
        const message = document.getElementById('message').value;

        const fromContainer = document.getElementById('from-container');
        const toContainer = document.getElementById('to-container');
        const avatar = document.querySelector('.avatar');
        const metadata = document.querySelector('.metadata');

        // Hide or show sender information
        if (sender) {
            fromContainer.style.display = 'block';
            document.getElementById('preview-sender').textContent = sender;
            avatar.style.display = 'flex';
            avatar.textContent = sender[0].toUpperCase();
        } else {
            fromContainer.style.display = 'none';
            avatar.style.display = 'none';
        }

        // Hide or show recipient information
        if (recipient) {
            toContainer.style.display = 'block';
            document.getElementById('preview-recipient').textContent = recipient;
        } else {
            toContainer.style.display = 'none';
        }

        // Hide metadata container if both sender and recipient are empty
        metadata.style.display = (sender || recipient) ? 'flex' : 'none';

        document.getElementById('preview-subject').textContent = subject || 'Subject';
        document.getElementById('preview-message').innerHTML = message.replace(/\n/g, '<br>');

        // Adjust preview container height
        const previewContainer = document.querySelector('.preview-container');
        const previewContent = document.querySelector('.preview-content');
        previewContainer.style.height = `${previewContent.offsetHeight - 15}px`;
    }


    document.querySelectorAll('input, textarea').forEach(input => {
        input.addEventListener('input', updatePreview);
    });

    function toggleTheme() {
        document.body.classList.toggle('dark-mode');
    }

    function convertToImage() {
        const preview = document.querySelector('.preview-container');
        html2canvas(preview, {
            backgroundColor: "none",
            scale: 4
        }).then(canvas => {
            canvas.toBlob(blob => {
                navigator.clipboard.write([new ClipboardItem({'image/png': blob})]);
            });
        });
    }

    const previewContainer = document.querySelector('.preview-container');
    const widthSlider = document.getElementById('previewWidth');
    const widthValue = document.getElementById('widthValue');

    widthSlider.addEventListener('input', function () {
        const width = this.value;
        previewContainer.style.width = `${width}px`;
        widthValue.textContent = `${width}px`;
        updatePreview(); // Adjust height after width change
    });

    // Initialize preview width
    previewContainer.style.width = `${widthSlider.value}px`;

    // Call updatePreview initially and whenever the window is resized
    updatePreview();
    window.addEventListener('resize', updatePreview);
</script>
</body>
</html>
